/*! melchiorjs - v0.1.3-rc (https://github.com/voronianski/melchior.js) */
!function(a){"use strict";function b(){return document.getElementsByTagName("script")}function c(a,b){if(a)for(var c=0,d=a.length;d>c;c++)a[c]&&b(a[c],c,a)}function d(a,b){if(a)for(var c=a.length;c--&&(!a[c]||!b(a[c],c,a)););}function e(a){return"[object Array]"===Object.prototype.toString.call(a)}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){var c;for(c in a)if(f(a,c)&&b(a[c],c))break}function h(a){this.path=a,this._depTable={},this._depLength=0,this._loaded=!1,m._moduleTable[a]=this}var i={},j=document.getElementsByTagName("head")[0],k=/\.js$/,l=document.getElementsByTagName("base")[0];l&&(j=l.parentNode),d(b(),function(a){var b=a.getAttribute("data-main");return b?(i.main=b,!0):void 0});var m=a.melchiorjs=function(a){return a.main&&m._injectMain(i.main),i=a,i.timeout=i.timeout||5e3,i.shim=i.shim||{},i.paths&&g(i.paths,function(a,b){var c=a.split("/"),d=c.length-1;k.test(c[d])||(c[d]+=".js",a=c.join("/")),m.load(a,function(a){var c="";if(a.content.match(/(melchiorjs)/g))c+=a.content;else{var d=f(i.shim,b),g=d&&i.shim[b].exports?i.shim[b].exports:b,h=d&&i.shim[b].deps?i.shim[b].deps:[],j="";e(h)&&h.length>0?(j+='.require("'+h.join('").require("')+'")',c+=[';melchiorjs.module("',b,'")',j,".body(function () {",a.content," ;return","(typeof ",g,' === "undefined" ? true : ',g,");","});"].join("")):c+=[a.content,';melchiorjs.module("',b,'").body(function () {'," return ",g,"; });"].join("")}m._injectScript(c)})}),m};m.config=function(a){return m(a)},m._createScript=function(){var a=document.createElement("script");return a.type="text/javascript",a.charset="utf-8",a.defer=!0,a.async=!0,a},m._injectMain=function(a){var b,c=this._createScript();c.onload=c.onerror=c.onreadystatechange=function(){c.readyState&&!/^c|loade/.test(c.readyState)||b||(c.onload=c.onreadystatechange=null,b=!0)},c.src=a,this._appendScript(c)},m._injectScript=function(a){var b=this._createScript();b.text=a,this._appendScript(b)},m._appendScript=function(a){l?j.insertBefore(a,l):j.appendChild(a)},m.load=function(a,b){var c=new XMLHttpRequest;c.open("GET",a),c.onreadystatechange=function(){if(4===c.readyState){if(200!==c.status)throw new Error("Cannot load module for url: "+a);b({content:c.responseText,type:c.getResponseHeader("content-type")})}},setTimeout(function(){c.readyState<4&&c.abort()},i.timeout),c.send()},m._events={},m.on=function(a,b){var c=this._events[a];c||(c=this._events[a]=[]),c.push(b)},m.emit=function(a,b){c(this._events[a],function(a){a(b)})},m._moduleTable={},m.module=function(a){return new h(a)},m._getModuleInstance=function(a){if(a){if(m._moduleTable[a]){if(m._moduleTable[a]._loaded)return m._moduleTable[a]._instance;throw new Error('Module "'+a+'" is not loaded')}throw new Error('Module "'+a+'" is not registered')}throw new Error("Module path is not provided")},m._checkDependenciesResolved=function(a){for(var b in a._depTable){var c=m._moduleTable[b];if(!c||!c._loaded)return!1}return a._loaded=!0,m.emit("ready",a),!0},m._refreshModuleState=function(){var a=!1;g(m._moduleTable,function(b){b._loaded||(a=a||m._checkDependenciesResolved(b))}),a&&m._refreshModuleState()},h.prototype={require:function(a,b){return this._depTable[a]={alias:b},this._depLength++,this},run:function(a){a&&(this._body=a),this._run()},body:function(a){this._body=a,0===this._depLength&&(this._loaded=!0,m.emit("ready",this)),this._run()},_run:function(){var a=this;m._refreshModuleState(),a._loaded?a._exec():m.on("ready",function(b){b.path===a.path&&setTimeout(function(){a._exec()},0)})},_exec:function(){var b=this,d=[];for(var e in b._depTable){var f=m._getModuleInstance(e);if(!f)return!1;var g=b._depTable[e].alias||e;if(/(\.)/.test(g)){var h=g.split(".");g=h[h.length-1]}d.push({varName:g,instance:f})}var i=function(){var a=[],e=[];c(d,function(b){a.push(b.varName),e.push(b.instance)});var f=b._body.toString(),g=f.substring(f.indexOf("{")+1,f.lastIndexOf("}"));return Function.apply(Function,a.concat([g])).apply(null,e)};b._instance=i.call(a)||"__executed__"}},m(i)}(this);